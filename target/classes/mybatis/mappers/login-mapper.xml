<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="login">



	<select id="login"  parameterType="LoginDTO" resultType="loginDTO">
	
	SELECT m_name, count(*) AS 'count' FROM member
	 WHERE m_id= #{m_id} AND m_pw= #{m_pw}
	

	</select>
	
	<select id="checkID"  parameterType="LoginDTO" resultType="LoginDTO">
	
	SELECT m_name, count(*) AS 'count' FROM member
	 WHERE m_id= #{m_id} AND m_pw= #{m_pw}
	

	</select>
	
	<select id="accountInfo" parameterType="LoginDTO" resultType="LoginDTO"> 
	
	SELECT a.a_account_number,a.a_balance
	FROM account a
	INNER JOIN member m ON a.m_no = m.m_no
	WHERE m.m_id =#{m_id}
	
	
	</select>
	
	<select id="joincheckID" parameterType="String" resultType="Integer">
	
	SELECT count(*) FROM member WHERE m_id= #{id}
	
	
	</select>
	


	<insert id="joinCreateID" parameterType="JoinDTO">
	
	INSERT INTO member (m_id,m_pw,m_name,m_addr,m_personal_id_number,m_phone)
	VALUES(#{id},#{pw1},#{name},#{addr},CONCAT(#{birth},'-',#{birth2}),#{phonenum})
	
	</insert>
	
	<select id="serchck" parameterType="JoinDTO" resultType="String">
	
	SELECT m_id 
	FROM member 
	WHERE m_name =#{name} 
	AND m_personal_id_number = CONCAT(#{birth},'-',#{birth2})
	
	
	</select>


	</mapper>